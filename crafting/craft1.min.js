function falldown(){var a=(uy+1)%40;fall1[crafa[ux+100*a]]&&!iselev[crafa[ux+100*uy]]&&(crafcc.fillStyle=crcol[crafa[ux+100*uy]],crafcc.fillRect(9*ux,10*uy,9,10),crafcc.fillStyle="#ee3333",crafcc.fillRect(9*ux,10*a,9,10),uy=a)}function movec(a){ud=a;var b=(ux+a+100)%100,c=(uy+39)%40;crafcc.fillStyle=crcol[crafa[ux+100*uy]],crafcc.fillRect(9*ux,10*uy,9,10),iswall[crafa[b+100*uy]]||(ux=b),iswall[crafa[b+100*uy]]&&0===crafa[ux+100*c]&&fall1[crafa[b+100*c]]&&(ux=b,uy=c),crafcc.fillStyle="#ee3333",crafcc.fillRect(9*ux,10*uy,9,10)}function craftn(a,b){var c=(ux+a+100)%100,d=(uy+b+40)%40;0===crafa[c+100*d]?crafa[c+100*d]=blockID:crafa[c+100*d]=0,crafcc.fillStyle=crcol[crafa[c+100*d]],crafcc.fillRect(9*c,10*d,9,10)}function _keyup(a){switch(a.keyCode){case 37:movec(-1);break;case 38:elev_move(-1);break;case 39:movec(1);break;case 40:elev_move(1);break;case 97:craftn(-1,1);break;case 99:craftn(1,1);break;case 100:craftn(-1,0);break;case 102:craftn(1,0);break;case 103:craftn(-1,-1);break;case 105:craftn(1,-1)}}function elev_move(a){var c,b=(uy+a+40)%40;iselev[c=crafa[ux+100*uy]]&&0===crafa[ux+100*b]&&(crafcc.fillStyle="#000000",crafcc.fillRect(9*ux,10*uy,9,10),crafa[ux+100*uy]=0,crafa[ux+100*b]=c,uy=b,crafcc.fillStyle="#ee3333",crafcc.fillRect(9*ux,10*uy,9,10))}function switchp(a){var b=(ux+a+100)%100;crafa[b+100*uy]=swit1[crafa[b+100*uy]],crafcc.fillStyle=crcol[crafa[b+100*uy]],crafcc.fillRect(9*b,10*uy,9,10)}for(var crafc=document.getElementById("craft1"),crafcc=crafc.getContext("2d"),crafa=new Uint8Array(4e3),crcol=["#000000","#bfbfbf","#404040","#664422"],y=39;y>=0;--y)for(var x=99;x>=0;--x)crafa[x+100*y]=y>38,crafcc.fillStyle=crcol[crafa[x+100*y]],crafcc.fillRect(9*x,10*y,9,10);var ux=49;uy=19,ud=1,crafcc.fillStyle="#ee3333",crafcc.fillRect(441,190,9,10);var iswall=[0,1,0,1],iselev=[0,0,1,0],fall1=[1,0,1,0],swit1=[0,1,3,2],blockID=1;!function(){var a=0;!function b(){a=(a+1)%10,a||falldown(),requestAnimationFrame(b)}()}();

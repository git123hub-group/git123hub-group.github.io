var part_state=1,paused=!0,channel_num=0;!function(){function e(e,n){e>=82&&(e=81),n>=66&&(n=65);var c,i,f=F[n+1][e+1];if(part_state!==A){if(!paused)return;part_state?F[n+1][e+1][0]||(f[0]=part_state,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=0,part_state===z?(c=prompt("Enter number value for delay:"),f[2]=c>=1?c:1):part_state===H?f[2]=channel_num:part_state===Q&&(c=M.length,M[c]=[e+1,n+1],f[2]=c),r(e+1,n+1,f)):(f[0]===Q&&(c=f[2],i=M.length-1,M[c]=M[i],M.length=i),f[0]=0,r(e+1,n+1,f))}else{if(ctype=f[0],!f[1]&&ctype===L)return u(e+1,n+1,ctype),t();if(!f[1]&&ctype===G)return f[1]=2,r(e+1,n+1,f);a(e+1,n+1,f),r(e+1,n+1,f)}}function a(e,a,r,t){ctype=r[0],T[ctype]&&r[1]<=0&&(r[2]=ctype,r[0]=A,r[1]=4)}function r(e,a,r){var t,n;switch(d.fillStyle=m[r[0]],r[0]){case q:r[1]>0&&(5!==r[2]?(t=n=12.79*r[1]|0,6===r[2]&&(n=n>80?n-80:0),d.fillStyle="rgb("+t+","+n+","+t+")"):d.fillStyle="rgb("+(t=100*r[1]|0)+","+3*t/5+","+t/5+")");break;case z:r[1]>0&&(d.fillStyle="#D078D0");break;case G:2===r[1]?d.fillStyle="#3366FF":1===r[1]&&(d.fillStyle="#FF6633");break;case H:var c=r[2],i=127*Math.sin(.0628318*c+0)+128,f=127*Math.sin(.0628318*c+2)+128,o=127*Math.sin(.0628318*c+4)+128;d.fillStyle="rgb("+[0|i,0|f,0|o].join(",")+")";break;case Q:r[1]>10&&(d.fillStyle="#D0D0D0")}d.fillRect(10*(e-1),10*(a-1),10,10)}function t(){for(var e=1;67>e;e++)for(var a=1;83>a;a++)r(a,e,F[e][a])}function n(){var e,a,r;if(h>0)for(a=0;100>a;a++)k[a]>>=1;for(var n=0;b>n;n++){e=4*n*l;for(var c=0;l>c;c++){switch(r=F[n][c],r[0]){case A:r[2]===J||r[2]===K?(r[4]=r[3],r[3]&&r[3]--):U[r[2]]&&(r[3]=0);break;case x:5===r[3]&&(r[0]=E,r[1]=4,r[2]=S),r[3]=0;break;case S:5===r[3]&&(r[0]=E,r[1]=4,r[2]=x),r[3]=0;break;case R:r[1]=r[2],r[2]=0;break;case z:r[3]=r[1];break;case G:r[2]=r[1];break;case J:case K:r[4]=r[3],r[3]&&r[3]--}if(r[1])switch(r[1]--,r[0]){case q:r[1]||(r[0]=0)}}}for(a=0;b>a;a++)F[a][0][0]=0,F[a][l-1][0]=0;for(a=0;l>a;a++)F[0][a][0]=0,F[b-1][a][0]=0;for(var n=0;b>n;n++){r=F[n];for(var c=0;l>c;c++)i(c,n,r[c])}t()}function c(e,a){return e>=0&&l>e&&a>=0&&b>a}function i(e,r,t){var n,i,s,v,p,y,w,d,m,M,W,X,Y,Z,$,ee,ae,re=t[0],te=!1,ne=V[re],ce=Math.min(ne,e),ie=Math.min(ne,r),fe=Math.min(ne,l-e-3),oe=Math.min(ne,b-r-3);switch(re){case A:if(!t[1])return t[1]=4,void(t[0]=t[2]);if(t[1]>=4)return;for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)if(!((ue>0?ue:-ue)+(se>0?se:-se)>=4)&&(d=w[n=e+ue],m=t[2],M=d[0],F[r+i>>1][e+n>>1][0]!==_)){switch(m){case x:(M===C||M===x||M===B||M===O)&&a(n,i,d);continue;case I:(M===I||M===g||M===D)&&a(n,i,d);continue;case L:M===D&&a(n,i,d);continue;case J:(M===g||M===J||M===D&&!t[4])&&a(n,i,d);continue;case K:(M===g||M===K||M===D&&t[4])&&a(n,i,d);continue;case N:M===N&&(a(n,i,d),d[3]=t[3]),(0===t[3]&&M===C||1===t[3]&&M===O)&&a(n,i,d);continue}switch(M){case A:switch(d[2]){case x:m===D&&(d[0]=E,d[1]=5,d[2]=S);break;case J:case K:m===C&&3===t[1]&&(d[3]=8)}continue;case g:if(m===D)continue;break;case S:m===g&&(d[0]=E,d[1]=5,d[2]=x);break;case x:if(m!==C&&m!==B&&m!==O){m===D&&(d[0]=E,d[1]=5,d[2]=S);continue}break;case E:d[1]<5&&(d[2]===x?m===C||m===B||m===O?(d[0]=A,d[1]=4):m===D&&(d[1]=5,d[2]=S):d[2]===S&&m===g&&(d[1]=5,d[2]=x));continue;case I:(m===g||m===D)&&a(n,i,d);continue;case L:m===g&&u(n,i,M);continue;case J:m===C&&3===t[1]&&(d[3]=8),(m===D||m===g&&!d[4])&&a(n,i,d);continue;case K:m===C&&3===t[1]&&(d[3]=8),(m===D||m===g&&d[4])&&a(n,i,d);continue;case N:d[3]=Math.random()<.5?0:1;break;case Q:d[1]<=0&&(d[1]=12);continue}a(n,i,d)}}break;case E:if(t[1]<=0)return void(t[0]=t[2]);if(t[1]>1&&t[1]<5)for(var se=-ie;oe>=se;se++){w=F[r+se];for(var ue=-ce;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],(U[d[0]]||d[0]===A&&U[d[2]]||d[0]===E&&d[2]===x&&t[2]===S)&&(d[2]=t[2],d[0]=E,d[1]=5))}break;case P:for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],F[r+i>>1][e+n>>1][0]!==_&&d[0]!==I&&d[0]!==J&&d[0]!==K&&(a(n=e+ue,i,d),d[0]==N&&(d[3]=Math.random()<.5?1:0)))}break;case j:p=-4;for(var se=-1;2>se;se++){w=F[i=r+se];for(var ue=-1;2>ue;ue++,p++)if(d=w[n=e+ue],d[0]===A&&3===d[1]&&p)for(y=0>p?-p:p,W=-ue,X=-se,Y=e+W,Z=r+X,ee=d[2]===L,ae=d[2]===g;c(Y,Z);){if(s=(v=F[Z][Y])[0]){if(v[0]===R){v[2]=1;break}if(ae){if(U[v[0]]&&(v[3]|=1<<y-1),v[0]===I||v[0]===A&&v[2]===I||v[0]===j||v[0]===x||v[0]===E&&v[2]===x){Y+=W,Z+=X;continue}if(v[0]===q){v[1]=1,v[2]=5,Y+=W,Z+=X;continue}break}if(v[0]===I||v[0]===A&&v[2]===I||v[0]===j||v[0]===x||v[0]===E&&v[2]===x){Y+=W,Z+=X;continue}if(v[0]===q){if(v[1]){if(v[2]===y||6===v[2])break;5!==v[2]&&(v[1]=0);break}Y+=W,Z+=X;continue}if(a(Y,Z,v),!ee||v[0]!==A||!T[v[2]])break}else v[0]=q,v[1]=ae?2:20,v[2]=ae?5:y;Y+=W,Z+=X}}break;case B:if(!t[1])for(var ve=[-4,4,0,0],le=[0,0,-4,4],be=0;4>be;be++)ue=ve[be],se=le[be],c(e+ue,r+se)&&(d=F[r+se][e+ue])[0]===A&&d[1]<4&&a(e,r,t);break;case R:if(1===t[1])for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],a(n,i,d))}break;case z:for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)if(!((ue>0?ue:-ue)+(se>0?se:-se)>=4)&&F[r+i>>1][e+n>>1][0]!==_)switch(d=w[n=e+ue],d[0]){case A:d[1]>0&&d[1]<4&&d[2]===g&&t[1]<=0&&(t[1]=t[2]);break;case z:d[1]<t[1]&&!d[3]&&t[3]&&(d[1]=t[1]);break;case D:1===t[3]&&a(n,i,d)}}break;case G:v=0;for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)switch(d=w[n=e+ue],d[0]){case A:if(3===d[1]&&d[2]===g)return void(t[1]=2);break;case D:2===t[2]&&a(n,i,d);break;case G:2===d[2]&&v++}}0!==t[2]||1!==v&&2!==v||(t[1]=2);break;case H:p=t[2];for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)d=w[n=e+ue],1&k[p]&&(v=d[0],(v===D||v===g||v===I)&&a(n,i,d)),d[0]===A&&3===d[1]&&d[2]!==D&&(k[p]|=2,h=2)}break;case Q:if(11===t[1]){for(var se=-ie;oe>=se;se++){w=F[i=r+se];for(var ue=-ce;fe>=ue;ue++)d=w[n=e+ue],(d[0]===C||d[0]===O)&&d[1]<=0&&(a(n,i,d),te=!0)}if(!te){var $=f(e,r);n=$[0],n>=0&&(i=$[1],F[i][n][1]=12,o(e,r,n,i))}}}}function f(e,a){for(var r,t,n,c,i,f=[-1],o=1e4,s=0,u=M.length;u>s;s++)r=M[s],t=F[c=r[1]][n=r[0]],t[0]===Q&&t[1]<=0&&(i=(e>n?e-n:n-e)+(a>c?a-c:c-a),o>i&&(o=i,f[0]=n,f[1]=c));return f}function o(e,a,r,t){var n,c,i,f,o,s,u,v=Math.abs(t-a)>Math.abs(r-e),l=0;for(v&&(c=e,e=a,a=c,c=r,r=t,t=c),e>r&&(c=e,e=r,r=c,c=a,a=t,t=c),i=r-e,f=Math.abs(t-a),s=f/i,c=a,o=t>a?1:-1,n=e;r>=n;n++)u=v?F[n][c]:F[c][n],(!u[0]||u[0]===q&&(u[2]=6))&&(u[0]=q,u[1]=20,u[2]=6),l+=s,l>=.5&&(c+=o,l-=1)}function s(e,a){return a[0]===e||a[0]===A&&a[2]===e}function u(e,a,r){if(F[a][e][1])return 0;var t,n,c,i,f,o,u,v,b,k,h,p,y=[e],w=[a],d=1;do{for(h=p=e=y[--d],a=w[d],b=F[a];(u=h-1)>=0&&b[u][0]===r&&!b[u][1];)h=u;for(;(v=p+1)<l&&b[v][0]===r&&!b[v][1];)p=v;for(k=h;p>=k;k++)b[k][0]=A,b[k][1]=4,b[k][2]=r;if(i=a-1,t=F[i],f=a+1,n=F[f],h===p&&s(r,t[e-1])&&s(r,t[e+1])&&s(r,t[e])&&s(r,(c=F[o=a-2])[e])&&!s(r,c[e-1])&&!s(r,c[e+1]))c[e][0]!==r||c[e][1]||(y[d]=e,w[d++]=o);else for(k=h;p>=k;k++)t[k][0]!==r||t[k][1]||(k===h||k===p||!s(r,n[k])||s(r,n[k+1])||s(r,n[k-1]))&&(y[d]=k,w[d++]=i);if(h===p&&s(r,n[e-1])&&s(r,n[e+1])&&s(r,n[e])&&s(r,(c=F[o=a+2])[e])&&!s(r,c[e-1])&&!s(r,c[e+1]))c[e][0]!==r||c[e][1]||(y[d]=e,w[d++]=o);else for(k=h;p>=k;k++)n[k][0]!==r||n[k][1]||(k===h||k===p||!s(r,t[k])||s(r,t[k+1])||s(r,t[k-1]))&&(y[d]=k,w[d++]=f)}while(d)}function v(){W||(n(),W=5),paused||requestAnimationFrame(v),W--}for(var l=84,b=68,k=[0],h=0,F=[],p=b-1;p>=0;p--){F[p]=[];for(var y=l-1;y>=0;y--)F[p][y]=new Int32Array(6)}for(var p=0;100>p;p++)k[p]=0;var w=document.getElementById("PartLayer"),d=w.getContext("2d"),m=["#000000","#444466","#FFFFCC","#AAAAAA","#805050","#505080","#003000","#20CC20","#108010","#554040","#40403C","#858505","#FFC000","#FFFFFF","#DCAD2C","#FD9D18","#902090","#FFCC00","#40A060","#405050","#505040","#002080","#707070","#383838"],M=[],C=1,A=2,_=3,g=4,D=5,S=6,x=7,E=8,I=9,L=10,P=11,j=12,q=13,B=14,R=15,z=16,G=17,H=18,J=19,K=20,N=21,O=22,Q=23,T=[0,1,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0],U=[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2],W=0;t(),window.run_frame=n,window.simLoopFn=v,window.clickPixel=e}();
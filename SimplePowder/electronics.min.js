var part_state=1,paused=!0,channel_num=0;!function(){function e(e,n){e>=82&&(e=81),n>=66&&(n=65);var i,c,f=p[n+1][e+1];if(part_state!==g){if(!paused)return;part_state?p[n+1][e+1][0]||(f[0]=part_state,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=0,part_state===z?(i=prompt("Enter number value for delay:"),f[2]=i>=1?i:1):part_state===H?f[2]=channel_num:part_state===Q&&(i=C.length,C[i]=[e+1,n+1],f[2]=i),r(e+1,n+1,f)):(f[0]===Q&&(i=f[2],c=C.length-1,C[i]=C[c],p[C[i][1]][C[i][0]][2]=i,C.length=c),f[0]=0,r(e+1,n+1,f))}else{if(ctype=f[0],!f[1]&&ctype===I)return u(e+1,n+1,ctype),t();if(!f[1]&&ctype===G)return f[1]=2,r(e+1,n+1,f);if(!f[1]&&ctype===Q)return f[1]=8,r(e+1,n+1,f);a(e+1,n+1,f),r(e+1,n+1,f)}}function a(e,a,r,t){ctype=r[0],U[ctype]&&r[1]<=0&&(r[2]=ctype,r[0]=g,r[1]=4)}function r(e,a,r){var t,n;switch(m.fillStyle=w[r[0]],r[0]){case q:r[1]>0&&(5!==r[2]?(t=n=12.79*r[1]|0,6===r[2]&&(n=n>80?n-80:0),m.fillStyle="rgb("+t+","+n+","+t+")"):m.fillStyle="rgb("+(t=100*r[1]|0)+","+3*t/5+","+t/5+")");break;case z:r[1]>0&&(m.fillStyle="#D078D0");break;case G:2===r[1]?m.fillStyle="#3366FF":1===r[1]&&(m.fillStyle="#FF6633");break;case H:var i=r[2],c=127*Math.sin(.0628318*i+0)+128,f=127*Math.sin(.0628318*i+2)+128,o=127*Math.sin(.0628318*i+4)+128;m.fillStyle="rgb("+[0|c,0|f,0|o].join(",")+")";break;case Q:r[1]>0&&(t=20*r[1],m.fillStyle="rgb("+[64+t,60+t,56+t].join(",")+")");break;case T:r[1]>0&&(m.fillStyle="#C090C0")}m.fillRect(10*(e-1),10*(a-1),10,10)}function t(){for(var e=1;67>e;e++)for(var a=1;83>a;a++)r(a,e,p[e][a])}function n(){var e,a,r;if(h>0)for(a=0;100>a;a++)k[a]>>=1;for(var n=0;b>n;n++){e=4*n*v;for(var i=0;v>i;i++){switch(r=p[n][i],r[0]){case g:r[2]===J||r[2]===K?(r[4]=r[3],r[3]&&r[3]--):V[r[2]]&&(r[3]=0);break;case j:5===r[3]&&(r[0]=x,r[1]=4,r[2]=D),r[3]=0;break;case D:5===r[3]&&(r[0]=x,r[1]=4,r[2]=j),r[3]=0;break;case R:r[1]=r[2],r[2]=0;continue;case z:r[3]=r[1];break;case G:r[2]=r[1];break;case J:case K:r[4]=r[3],r[3]&&r[3]--}if(r[1])switch(r[1]--,r[0]){case q:r[1]||(r[0]=0)}}}for(a=0;b>a;a++)p[a][0][0]=0,p[a][v-1][0]=0;for(a=0;v>a;a++)p[0][a][0]=0,p[b-1][a][0]=0;for(var n=0;b>n;n++){r=p[n];for(var i=0;v>i;i++)c(i,n,r[i])}t()}function i(e,a){return e>=0&&v>e&&a>=0&&b>a}function c(e,r,t){var n,c,s,l,y,F,d,m,w,C,X,Y,Z,$,ee,ae,re,te=t[0],ne=!1,ie=W[te],ce=Math.min(ie,e),fe=Math.min(ie,r),oe=Math.min(ie,v-e-3),se=Math.min(ie,b-r-3);switch(te){case g:if(!t[1])return t[1]=4,void(t[0]=t[2]);if(t[1]>=4)return;w=t[2];for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)if(!((le>0?le:-le)+(ue>0?ue:-ue)>=4)&&(m=d[n=e+le],C=m[0],p[r+c>>1][e+n>>1][0]!==A)){switch(w){case D:case j:(C===M||C===j||C===B||C===O)&&a(n,c,m);continue;case E:(C===E||C===_||C===S)&&a(n,c,m);continue;case I:C===S&&a(n,c,m);continue;case J:(C===_||C===J||C===S&&!t[4])&&a(n,c,m);continue;case K:(C===_||C===K||C===S&&t[4])&&a(n,c,m);continue;case N:C===N&&(a(n,c,m),m[3]=t[3]),(0===t[3]&&C===M||1===t[3]&&C===O)&&a(n,c,m);continue}switch(C){case g:switch(m[2]){case j:w===S&&(0>ue+le<<2&&(m[0]=x,m[1]=5),m[2]=D);break;case J:case K:w===M&&3===t[1]&&(m[3]=8)}continue;case _:if(w===S)continue;break;case D:w===_&&(m[0]=x,m[1]=5,m[2]=j);break;case j:if(w!==M&&w!==B&&w!==O){w===S&&(m[0]=x,m[1]=5,m[2]=D);continue}break;case x:m[1]<5&&(m[2]===j?w===M||w===B||w===O?(m[0]=g,m[1]=4):w===S&&(m[1]=5,m[2]=D):m[2]===D&&w===_&&(m[1]=5,m[2]=j));continue;case E:(w===_||w===S)&&a(n,c,m);continue;case I:w===_&&u(n,c,C);continue;case J:w===M&&3===t[1]&&(m[3]=8),(w===S||w===_&&!m[4])&&a(n,c,m);continue;case K:w===M&&3===t[1]&&(m[3]=8),(w===S||w===_&&m[4])&&a(n,c,m);continue;case N:m[3]=Math.random()<.5?0:1;break;case Q:m[1]<=0&&(m[1]=8);continue}a(n,c,m)}}w==D&&(t[0]=x,t[1]=5);break;case x:if(t[1]<=0)return void(t[0]=t[2]);if(t[1]>1&&t[1]<5)for(var ue=-fe;se>=ue;ue++){d=p[r+ue];for(var le=-ce;oe>=le;le++)(le>0?le:-le)+(ue>0?ue:-ue)>=4||(m=d[n=e+le],(V[m[0]]||m[0]===g&&V[m[2]]||m[0]===x&&m[2]===j&&t[2]===D)&&(m[2]=t[2],m[0]=x,m[1]=5))}break;case L:for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)(le>0?le:-le)+(ue>0?ue:-ue)>=4||(m=d[n=e+le],p[r+c>>1][e+n>>1][0]!==A&&m[0]!==E&&m[0]!==J&&m[0]!==K&&(a(n=e+le,c,m),m[0]==N&&(m[3]=Math.random()<.5?1:0)))}break;case P:y=-4;for(var ue=-1;2>ue;ue++){d=p[c=r+ue];for(var le=-1;2>le;le++,y++)if(m=d[n=e+le],m[0]===g&&3===m[1]&&y)for(F=0>y?-y:y,X=-le,Y=-ue,Z=e+X,$=r+Y,ae=m[2]===I,re=m[2]===_;i(Z,$);){if(s=(l=p[$][Z])[0]){if(l[0]===R){l[2]=1;break}if(l[0]===T){l[1]=4,Z+=X,$+=Y;continue}if(re){if(V[l[0]]&&(l[3]|=1<<F-1),l[0]===E||l[0]===g&&l[2]===E||l[0]===P||l[0]===j||l[0]===x&&l[2]===j){Z+=X,$+=Y;continue}if(l[0]===q){l[1]=1,l[2]=5,Z+=X,$+=Y;continue}break}if(l[0]===E||l[0]===g&&l[2]===E||l[0]===P||l[0]===j||l[0]===x&&l[2]===j){Z+=X,$+=Y;continue}if(l[0]===q){if(l[1]){if(l[2]===F||6===l[2])break;5!==l[2]&&(l[1]=0);break}Z+=X,$+=Y;continue}if(l[0]===N&&(l[3]=2*Math.random()&1),a(Z,$,l),!ae||l[0]!==g||!U[l[2]])break}else l[0]=q,l[1]=re?2:20,l[2]=re?5:F;Z+=X,$+=Y}}break;case B:if(!t[1])for(var ve=[-4,4,0,0],be=[0,0,-4,4],ke=0;4>ke;ke++)le=ve[ke],ue=be[ke],i(e+le,r+ue)&&(m=p[r+ue][e+le])[0]===g&&m[1]<4&&a(e,r,t);break;case R:if(1===t[1])for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)(le>0?le:-le)+(ue>0?ue:-ue)>=4||(m=d[n=e+le],a(n,c,m))}break;case z:for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)if(!((le>0?le:-le)+(ue>0?ue:-ue)>=4)&&p[r+c>>1][e+n>>1][0]!==A)switch(m=d[n=e+le],m[0]){case g:m[1]>0&&m[1]<4&&m[2]===_&&t[1]<=0&&(t[1]=t[2]);break;case z:m[1]<t[1]&&!m[3]&&t[3]&&(m[1]=t[1]);break;case S:1===t[3]&&a(n,c,m)}}break;case G:l=0;for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)switch(m=d[n=e+le],m[0]){case g:if(3===m[1]&&m[2]===_)return void(t[1]=2);break;case S:2===t[2]&&a(n,c,m);break;case G:2===m[2]&&l++}}0!==t[2]||1!==l&&2!==l||(t[1]=2);break;case H:y=t[2];for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)m=d[n=e+le],1&k[y]&&(l=m[0],(l===S||l===_||l===E)&&a(n,c,m)),m[0]===g&&3===m[1]&&m[2]!==S&&(k[y]|=2,h=2)}break;case Q:if(7===t[1]){for(var ue=-fe;se>=ue;ue++){d=p[c=r+ue];for(var le=-ce;oe>=le;le++)m=d[n=e+le],(2>le&&le>-2||2>ue&&ue>-2)&&(m[0]===M||m[0]===O||m[0]===_||m[0]===S)&&m[1]<=0&&(a(n,c,m),ne=!0)}if(!ne){var ee=f(e,r);n=ee[0],n>=0&&(c=ee[1],o(e,r,n,c)&&(p[c][n][1]=8))}}}}function f(e,a){for(var r,t,n,i,c,f=[-1],o=1e4,s=0,u=C.length;u>s;s++)r=C[s],t=p[i=r[1]][n=r[0]],t[0]===Q&&t[1]<=0&&(c=(e>n?e-n:n-e)+(a>i?a-i:i-a),o>c&&(o=c,f[0]=n,f[1]=i));return f}function o(e,a,r,t){var n,i,c,f,o,s,u,l=[],v=0,b=Math.abs(t-a)>Math.abs(r-e),k=0;for(b&&(i=e,e=a,a=i,i=r,r=t,t=i),e>r&&(i=e,e=r,r=i,i=a,a=t,t=i),c=r-e,f=Math.abs(t-a),s=f/c,i=a,o=t>a?1:-1,n=e;r>=n;n++){if(u=b?p[n][i]:p[i][n],l[v++]=u,u[0]===A)return!1;k+=s,k>=.5&&(i+=o,k-=1)}for(n=0;v>n;n++)u=l[n],(!u[0]||u[0]===q&&(u[2]=6))&&(u[0]=q,u[1]=20,u[2]=6);return!0}function s(e,a){return a[0]===e||a[0]===g&&a[2]===e}function u(e,a,r){if(p[a][e][1])return 0;var t,n,i,c,f,o,u,l,b,k,h,y,F=[e],d=[a],m=1;do{for(h=y=e=F[--m],a=d[m],b=p[a];(u=h-1)>=0&&b[u][0]===r&&!b[u][1];)h=u;for(;(l=y+1)<v&&b[l][0]===r&&!b[l][1];)y=l;for(k=h;y>=k;k++)b[k][0]=g,b[k][1]=4,b[k][2]=r;if(c=a-1,t=p[c],f=a+1,n=p[f],h===y&&s(r,t[e-1])&&s(r,t[e+1])&&s(r,t[e])&&s(r,(i=p[o=a-2])[e])&&!s(r,i[e-1])&&!s(r,i[e+1]))i[e][0]!==r||i[e][1]||(F[m]=e,d[m++]=o);else for(k=h;y>=k;k++)t[k][0]!==r||t[k][1]||(k===h||k===y||!s(r,n[k])||s(r,n[k+1])||s(r,n[k-1]))&&(F[m]=k,d[m++]=c);if(h===y&&s(r,n[e-1])&&s(r,n[e+1])&&s(r,n[e])&&s(r,(i=p[o=a+2])[e])&&!s(r,i[e-1])&&!s(r,i[e+1]))i[e][0]!==r||i[e][1]||(F[m]=e,d[m++]=o);else for(k=h;y>=k;k++)n[k][0]!==r||n[k][1]||(k===h||k===y||!s(r,t[k])||s(r,t[k+1])||s(r,t[k-1]))&&(F[m]=k,d[m++]=f)}while(m)}function l(){X||(n(),X=5),paused||requestAnimationFrame(l),X--}for(var v=84,b=68,k=[0],h=0,p=[],y=b-1;y>=0;y--){p[y]=[];for(var F=v-1;F>=0;F--)p[y][F]=new Int32Array(6)}for(var y=0;100>y;y++)k[y]=0;var d=document.getElementById("PartLayer"),m=d.getContext("2d"),w=["#000000","#444466","#FFFFCC","#AAAAAA","#805050","#505080","#003000","#20CC20","#108010","#554040","#40403C","#858505","#FFC000","#FFFFFF","#DCAD2C","#FD9D18","#902090","#FFCC00","#40A060","#405050","#505040","#002080","#707070","#383838","#504050"],C=[],M=1,g=2,A=3,_=4,S=5,D=6,j=7,x=8,E=9,I=10,L=11,P=12,q=13,B=14,R=15,z=16,G=17,H=18,J=19,K=20,N=21,O=22,Q=23,T=24,U=[0,1,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0,0],V=[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],W=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2],X=0;t(),window.run_frame=n,window.simLoopFn=l,window.clickPixel=e}();
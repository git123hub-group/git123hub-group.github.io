var part_state=1,paused=!0,channel_num=0;!function(){function e(e,n){e>=82&&(e=81),n>=66&&(n=65);var i,c,f=p[n+1][e+1];if(part_state!==g){if(!paused)return;part_state?p[n+1][e+1][0]||(f[0]=part_state,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=0,part_state===z?(i=prompt("Enter number value for delay:"),f[2]=i>=1?i:1):part_state===H?f[2]=channel_num:part_state===Q&&(i=M.length,M[i]=[e+1,n+1],f[2]=i),r(e+1,n+1,f)):(f[0]===Q&&(i=f[2],c=M.length-1,M[i]=M[c],p[M[i][1]][M[i][0]][2]=i,M.length=c),f[0]=0,r(e+1,n+1,f))}else{if(ctype=f[0],!f[1]&&ctype===I)return u(e+1,n+1,ctype),t();if(!f[1]&&ctype===G)return f[1]=2,r(e+1,n+1,f);if(!f[1]&&ctype===Q)return f[1]=12,r(e+1,n+1,f);a(e+1,n+1,f),r(e+1,n+1,f)}}function a(e,a,r,t){ctype=r[0],T[ctype]&&r[1]<=0&&(r[2]=ctype,r[0]=g,r[1]=4)}function r(e,a,r){var t,n;switch(d.fillStyle=m[r[0]],r[0]){case q:r[1]>0&&(5!==r[2]?(t=n=12.79*r[1]|0,6===r[2]&&(n=n>80?n-80:0),d.fillStyle="rgb("+t+","+n+","+t+")"):d.fillStyle="rgb("+(t=100*r[1]|0)+","+3*t/5+","+t/5+")");break;case z:r[1]>0&&(d.fillStyle="#D078D0");break;case G:2===r[1]?d.fillStyle="#3366FF":1===r[1]&&(d.fillStyle="#FF6633");break;case H:var i=r[2],c=127*Math.sin(.0628318*i+0)+128,f=127*Math.sin(.0628318*i+2)+128,o=127*Math.sin(.0628318*i+4)+128;d.fillStyle="rgb("+[0|c,0|f,0|o].join(",")+")";break;case Q:r[1]>0&&(t=14*r[1],d.fillStyle="rgb("+[64+t,60+t,56+t].join(",")+")")}d.fillRect(10*(e-1),10*(a-1),10,10)}function t(){for(var e=1;67>e;e++)for(var a=1;83>a;a++)r(a,e,p[e][a])}function n(){var e,a,r;if(h>0)for(a=0;100>a;a++)k[a]>>=1;for(var n=0;b>n;n++){e=4*n*l;for(var i=0;l>i;i++){switch(r=p[n][i],r[0]){case g:r[2]===J||r[2]===K?(r[4]=r[3],r[3]&&r[3]--):U[r[2]]&&(r[3]=0);break;case j:5===r[3]&&(r[0]=x,r[1]=4,r[2]=D),r[3]=0;break;case D:5===r[3]&&(r[0]=x,r[1]=4,r[2]=j),r[3]=0;break;case R:r[1]=r[2],r[2]=0;break;case z:r[3]=r[1];break;case G:r[2]=r[1];break;case J:case K:r[4]=r[3],r[3]&&r[3]--}if(r[1])switch(r[1]--,r[0]){case q:r[1]||(r[0]=0)}}}for(a=0;b>a;a++)p[a][0][0]=0,p[a][l-1][0]=0;for(a=0;l>a;a++)p[0][a][0]=0,p[b-1][a][0]=0;for(var n=0;b>n;n++){r=p[n];for(var i=0;l>i;i++)c(i,n,r[i])}t()}function i(e,a){return e>=0&&l>e&&a>=0&&b>a}function c(e,r,t){var n,c,s,v,F,y,w,d,m,M,W,X,Y,Z,$,ee,ae,re=t[0],te=!1,ne=V[re],ie=Math.min(ne,e),ce=Math.min(ne,r),fe=Math.min(ne,l-e-3),oe=Math.min(ne,b-r-3);switch(re){case g:if(!t[1])return t[1]=4,void(t[0]=t[2]);if(t[1]>=4)return;for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)if(!((ue>0?ue:-ue)+(se>0?se:-se)>=4)&&(d=w[n=e+ue],m=t[2],M=d[0],p[r+c>>1][e+n>>1][0]!==A)){switch(m){case j:(M===C||M===j||M===B||M===O)&&a(n,c,d);continue;case E:(M===E||M===_||M===S)&&a(n,c,d);continue;case I:M===S&&a(n,c,d);continue;case J:(M===_||M===J||M===S&&!t[4])&&a(n,c,d);continue;case K:(M===_||M===K||M===S&&t[4])&&a(n,c,d);continue;case N:M===N&&(a(n,c,d),d[3]=t[3]),(0===t[3]&&M===C||1===t[3]&&M===O)&&a(n,c,d);continue}switch(M){case g:switch(d[2]){case j:m===S&&(d[0]=x,d[1]=5,d[2]=D);break;case J:case K:m===C&&3===t[1]&&(d[3]=8)}continue;case _:if(m===S)continue;break;case D:m===_&&(d[0]=x,d[1]=5,d[2]=j);break;case j:if(m!==C&&m!==B&&m!==O){m===S&&(d[0]=x,d[1]=5,d[2]=D);continue}break;case x:d[1]<5&&(d[2]===j?m===C||m===B||m===O?(d[0]=g,d[1]=4):m===S&&(d[1]=5,d[2]=D):d[2]===D&&m===_&&(d[1]=5,d[2]=j));continue;case E:(m===_||m===S)&&a(n,c,d);continue;case I:m===_&&u(n,c,M);continue;case J:m===C&&3===t[1]&&(d[3]=8),(m===S||m===_&&!d[4])&&a(n,c,d);continue;case K:m===C&&3===t[1]&&(d[3]=8),(m===S||m===_&&d[4])&&a(n,c,d);continue;case N:d[3]=Math.random()<.5?0:1;break;case Q:d[1]<=0&&(d[1]=12);continue}a(n,c,d)}}break;case x:if(t[1]<=0)return void(t[0]=t[2]);if(t[1]>1&&t[1]<5)for(var se=-ce;oe>=se;se++){w=p[r+se];for(var ue=-ie;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],(U[d[0]]||d[0]===g&&U[d[2]]||d[0]===x&&d[2]===j&&t[2]===D)&&(d[2]=t[2],d[0]=x,d[1]=5))}break;case L:for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],p[r+c>>1][e+n>>1][0]!==A&&d[0]!==E&&d[0]!==J&&d[0]!==K&&(a(n=e+ue,c,d),d[0]==N&&(d[3]=Math.random()<.5?1:0)))}break;case P:F=-4;for(var se=-1;2>se;se++){w=p[c=r+se];for(var ue=-1;2>ue;ue++,F++)if(d=w[n=e+ue],d[0]===g&&3===d[1]&&F)for(y=0>F?-F:F,W=-ue,X=-se,Y=e+W,Z=r+X,ee=d[2]===I,ae=d[2]===_;i(Y,Z);){if(s=(v=p[Z][Y])[0]){if(v[0]===R){v[2]=1;break}if(ae){if(U[v[0]]&&(v[3]|=1<<y-1),v[0]===E||v[0]===g&&v[2]===E||v[0]===P||v[0]===j||v[0]===x&&v[2]===j){Y+=W,Z+=X;continue}if(v[0]===q){v[1]=1,v[2]=5,Y+=W,Z+=X;continue}break}if(v[0]===E||v[0]===g&&v[2]===E||v[0]===P||v[0]===j||v[0]===x&&v[2]===j){Y+=W,Z+=X;continue}if(v[0]===q){if(v[1]){if(v[2]===y||6===v[2])break;5!==v[2]&&(v[1]=0);break}Y+=W,Z+=X;continue}if(a(Y,Z,v),!ee||v[0]!==g||!T[v[2]])break}else v[0]=q,v[1]=ae?2:20,v[2]=ae?5:y;Y+=W,Z+=X}}break;case B:if(!t[1])for(var ve=[-4,4,0,0],le=[0,0,-4,4],be=0;4>be;be++)ue=ve[be],se=le[be],i(e+ue,r+se)&&(d=p[r+se][e+ue])[0]===g&&d[1]<4&&a(e,r,t);break;case R:if(1===t[1])for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)(ue>0?ue:-ue)+(se>0?se:-se)>=4||(d=w[n=e+ue],a(n,c,d))}break;case z:for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)if(!((ue>0?ue:-ue)+(se>0?se:-se)>=4)&&p[r+c>>1][e+n>>1][0]!==A)switch(d=w[n=e+ue],d[0]){case g:d[1]>0&&d[1]<4&&d[2]===_&&t[1]<=0&&(t[1]=t[2]);break;case z:d[1]<t[1]&&!d[3]&&t[3]&&(d[1]=t[1]);break;case S:1===t[3]&&a(n,c,d)}}break;case G:v=0;for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)switch(d=w[n=e+ue],d[0]){case g:if(3===d[1]&&d[2]===_)return void(t[1]=2);break;case S:2===t[2]&&a(n,c,d);break;case G:2===d[2]&&v++}}0!==t[2]||1!==v&&2!==v||(t[1]=2);break;case H:F=t[2];for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)d=w[n=e+ue],1&k[F]&&(v=d[0],(v===S||v===_||v===E)&&a(n,c,d)),d[0]===g&&3===d[1]&&d[2]!==S&&(k[F]|=2,h=2)}break;case Q:if(11===t[1]){for(var se=-ce;oe>=se;se++){w=p[c=r+se];for(var ue=-ie;fe>=ue;ue++)d=w[n=e+ue],(2>ue&&ue>-2||2>se&&se>-2)&&(d[0]===C||d[0]===O||d[0]===_||d[0]===S)&&d[1]<=0&&(a(n,c,d),te=!0)}if(!te){var $=f(e,r);n=$[0],n>=0&&(c=$[1],o(e,r,n,c)&&(p[c][n][1]=12))}}}}function f(e,a){for(var r,t,n,i,c,f=[-1],o=1e4,s=0,u=M.length;u>s;s++)r=M[s],t=p[i=r[1]][n=r[0]],t[0]===Q&&t[1]<=0&&(c=(e>n?e-n:n-e)+(a>i?a-i:i-a),o>c&&(o=c,f[0]=n,f[1]=i));return f}function o(e,a,r,t){var n,i,c,f,o,s,u,v=[],l=0,b=Math.abs(t-a)>Math.abs(r-e),k=0;for(b&&(i=e,e=a,a=i,i=r,r=t,t=i),e>r&&(i=e,e=r,r=i,i=a,a=t,t=i),c=r-e,f=Math.abs(t-a),s=f/c,i=a,o=t>a?1:-1,n=e;r>=n;n++){if(u=b?p[n][i]:p[i][n],v[l++]=u,u[0]===A)return!1;k+=s,k>=.5&&(i+=o,k-=1)}for(n=0;l>n;n++)u=v[n],(!u[0]||u[0]===q&&(u[2]=6))&&(u[0]=q,u[1]=20,u[2]=6);return!0}function s(e,a){return a[0]===e||a[0]===g&&a[2]===e}function u(e,a,r){if(p[a][e][1])return 0;var t,n,i,c,f,o,u,v,b,k,h,F,y=[e],w=[a],d=1;do{for(h=F=e=y[--d],a=w[d],b=p[a];(u=h-1)>=0&&b[u][0]===r&&!b[u][1];)h=u;for(;(v=F+1)<l&&b[v][0]===r&&!b[v][1];)F=v;for(k=h;F>=k;k++)b[k][0]=g,b[k][1]=4,b[k][2]=r;if(c=a-1,t=p[c],f=a+1,n=p[f],h===F&&s(r,t[e-1])&&s(r,t[e+1])&&s(r,t[e])&&s(r,(i=p[o=a-2])[e])&&!s(r,i[e-1])&&!s(r,i[e+1]))i[e][0]!==r||i[e][1]||(y[d]=e,w[d++]=o);else for(k=h;F>=k;k++)t[k][0]!==r||t[k][1]||(k===h||k===F||!s(r,n[k])||s(r,n[k+1])||s(r,n[k-1]))&&(y[d]=k,w[d++]=c);if(h===F&&s(r,n[e-1])&&s(r,n[e+1])&&s(r,n[e])&&s(r,(i=p[o=a+2])[e])&&!s(r,i[e-1])&&!s(r,i[e+1]))i[e][0]!==r||i[e][1]||(y[d]=e,w[d++]=o);else for(k=h;F>=k;k++)n[k][0]!==r||n[k][1]||(k===h||k===F||!s(r,t[k])||s(r,t[k+1])||s(r,t[k-1]))&&(y[d]=k,w[d++]=f)}while(d)}function v(){W||(n(),W=5),paused||requestAnimationFrame(v),W--}for(var l=84,b=68,k=[0],h=0,p=[],F=b-1;F>=0;F--){p[F]=[];for(var y=l-1;y>=0;y--)p[F][y]=new Int32Array(6)}for(var F=0;100>F;F++)k[F]=0;var w=document.getElementById("PartLayer"),d=w.getContext("2d"),m=["#000000","#444466","#FFFFCC","#AAAAAA","#805050","#505080","#003000","#20CC20","#108010","#554040","#40403C","#858505","#FFC000","#FFFFFF","#DCAD2C","#FD9D18","#902090","#FFCC00","#40A060","#405050","#505040","#002080","#707070","#383838"],M=[],C=1,g=2,A=3,_=4,S=5,D=6,j=7,x=8,E=9,I=10,L=11,P=12,q=13,B=14,R=15,z=16,G=17,H=18,J=19,K=20,N=21,O=22,Q=23,T=[0,1,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0],U=[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],V=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2,2],W=0;t(),window.run_frame=n,window.simLoopFn=v,window.clickPixel=e}();
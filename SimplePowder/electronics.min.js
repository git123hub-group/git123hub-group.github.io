var part_state=1,paused=!0,channel_num=0;!function(){function e(e,c){e>=82&&(e=81),c>=66&&(c=65);var n,i=k[c+1][e+1];if(part_state!==m){if(!paused)return;part_state?k[c+1][e+1][0]||(i[0]=part_state,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=0,part_state===q&&(n=prompt("Enter number value for delay:"),i[2]=n>=1?n:1),part_state===R&&(i[2]=channel_num),r(e+1,c+1,i)):(i[0]=0,r(e+1,c+1,i))}else{if(ctype=i[0],!i[1]&&ctype===x)return o(e+1,c+1,ctype),t();if(!i[1]&&ctype===B)return i[1]=2,r(e+1,c+1,i);a(e+1,c+1,i),r(e+1,c+1,i)}}function a(e,a,r,t){ctype=r[0],K[ctype]&&r[1]<=0&&(r[2]=ctype,r[0]=m,r[1]=4)}function r(e,a,r){var t;switch(y.fillStyle=w[r[0]],r[0]){case L:r[1]>0&&(5!==r[2]?y.fillStyle="rgb("+(t=12.79*r[1]|0)+","+t+","+t+")":y.fillStyle="rgb("+(t=100*r[1]|0)+","+3*t/5+","+t/5+")");break;case q:r[1]>0&&(y.fillStyle="#D078D0");break;case B:2===r[1]?y.fillStyle="#3366FF":1===r[1]&&(y.fillStyle="#FF6633");break;case R:var c=r[2],n=127*Math.sin(.0628318*c+0)+128,i=127*Math.sin(.0628318*c+2)+128,f=127*Math.sin(.0628318*c+4)+128;y.fillStyle="rgb("+[0|n,0|i,0|f].join(",")+")"}y.fillRect(10*(e-1),10*(a-1),10,10)}function t(){for(var e=1;67>e;e++)for(var a=1;83>a;a++)r(a,e,k[e][a])}function c(){var e,a,r;if(b>0)for(a=0;100>a;a++)l[a]>>=1;for(var c=0;v>c;c++){e=4*c*u;for(var n=0;u>n;n++){switch(r=k[c][n],r[0]){case m:r[2]===z||r[2]===G?(r[4]=r[3],r[3]&&r[3]--):N[r[2]]&&(r[3]=0);break;case S:5===r[3]&&(r[0]=D,r[1]=4,r[2]=_),r[3]=0;break;case _:5===r[3]&&(r[0]=D,r[1]=4,r[2]=S),r[3]=0;break;case j:r[1]=r[2],r[2]=0;break;case q:r[3]=r[1];break;case B:r[2]=r[1];break;case z:case G:r[4]=r[3],r[3]&&r[3]--}if(r[1])switch(r[1]--,r[0]){case L:r[1]||(r[0]=0)}}}for(a=0;v>a;a++)k[a][0][0]=0,k[a][u-1][0]=0;for(a=0;u>a;a++)k[0][a][0]=0,k[v-1][a][0]=0;for(var c=0;v>c;c++){r=k[c];for(var n=0;u>n;n++)i(n,c,r[n])}t()}function n(e,a){return e>=0&&u>e&&a>=0&&v>a}function i(e,r,t){var c,i,f,s,h,F,p,y,w,Q,T,U,V,W,X,Y,Z=t[0],$=O[Z],ee=Math.min($,e),ae=Math.min($,r),re=Math.min($,u-e-3),te=Math.min($,v-r-3);switch(Z){case m:if(!t[1])return t[1]=4,void(t[0]=t[2]);if(t[1]>=4)return;for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)if(!((ne>0?ne:-ne)+(ce>0?ce:-ce)>=4)&&(y=p[c=e+ne],w=t[2],Q=y[0],k[r+i>>1][e+c>>1][0]!==C)){switch(w){case S:(Q===d||Q===S||Q===P||Q===J)&&a(c,i,y);continue;case g:(Q===g||Q===A||Q===M)&&a(c,i,y);continue;case x:Q===M&&a(c,i,y);continue;case z:(Q===A||Q===z||Q===M&&!t[4])&&a(c,i,y);continue;case G:(Q===A||Q===G||Q===M&&t[4])&&a(c,i,y);continue;case H:Q===H&&(a(c,i,y),y[3]=t[3]),(0===t[3]&&Q===d||1===t[3]&&Q===J)&&a(c,i,y);continue}switch(Q){case m:switch(y[2]){case S:w===M&&(y[0]=D,y[1]=5,y[2]=_);break;case z:case G:w===d&&3===t[1]&&(y[3]=8)}continue;case A:if(w===M)continue;break;case _:w===A&&(y[0]=D,y[1]=5,y[2]=S);break;case S:if(w!==d&&w!==P&&w!==J){w===M&&(y[0]=D,y[1]=5,y[2]=_);continue}break;case D:y[1]<5&&(y[2]===S?w===d||w===P||w===J?(y[0]=m,y[1]=4):w===M&&(y[1]=5,y[2]=_):y[2]===_&&w===A&&(y[1]=5,y[2]=S));continue;case g:(w===A||w===M)&&a(c,i,y);continue;case x:w===A&&o(c,i,Q);continue;case z:w===d&&3===t[1]&&(y[3]=8),(w===M||w===A&&!y[4])&&a(c,i,y);continue;case G:w===d&&3===t[1]&&(y[3]=8),(w===M||w===A&&y[4])&&a(c,i,y);continue;case H:y[3]=Math.random()<.5?0:1}a(c,i,y)}}break;case D:if(t[1]<=0)return void(t[0]=t[2]);if(t[1]>1&&t[1]<5)for(var ce=-ae;te>=ce;ce++){p=k[r+ce];for(var ne=-ee;re>=ne;ne++)(ne>0?ne:-ne)+(ce>0?ce:-ce)>=4||(y=p[c=e+ne],(N[y[0]]||y[0]===m&&N[y[2]]||y[0]===D&&y[2]===S&&t[2]===_)&&(y[2]=t[2],y[0]=D,y[1]=5))}break;case E:for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)(ne>0?ne:-ne)+(ce>0?ce:-ce)>=4||(y=p[c=e+ne],k[r+i>>1][e+c>>1][0]!==C&&y[0]!==g&&y[0]!==z&&y[0]!==G&&(a(c=e+ne,i,y),y[0]==H&&(y[3]=Math.random()<.5?1:0)))}break;case I:h=-4;for(var ce=-1;2>ce;ce++){p=k[i=r+ce];for(var ne=-1;2>ne;ne++,h++)if(y=p[c=e+ne],y[0]===m&&3===y[1]&&h)for(F=0>h?-h:h,T=-ne,U=-ce,V=e+T,W=r+U,X=y[2]===x,Y=y[2]===A;n(V,W);){if(f=(s=k[W][V])[0]){if(s[0]===j){s[2]=1;break}if(Y){if(N[s[0]]&&(s[3]|=1<<F-1),s[0]===g||s[0]===m&&s[2]===g||s[0]===I||s[0]===S||s[0]===D&&s[2]===S){V+=T,W+=U;continue}if(s[0]===L){s[1]=1,s[2]=5,V+=T,W+=U;continue}break}if(s[0]===g||s[0]===m&&s[2]===g||s[0]===I||s[0]===S||s[0]===D&&s[2]===S){V+=T,W+=U;continue}if(s[0]===L){if(s[1]){if(s[2]===F)break;5!==s[2]&&(s[1]=0);break}V+=T,W+=U;continue}if(a(V,W,s),!X||s[0]!==m||!K[s[2]])break}else s[0]=L,s[1]=Y?2:20,s[2]=Y?5:F;V+=T,W+=U}}break;case P:if(!t[1])for(var ie=[-4,4,0,0],fe=[0,0,-4,4],oe=0;4>oe;oe++)ne=ie[oe],ce=fe[oe],n(e+ne,r+ce)&&(y=k[r+ce][e+ne])[0]===m&&y[1]<4&&a(e,r,t);break;case j:if(1===t[1])for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)(ne>0?ne:-ne)+(ce>0?ce:-ce)>=4||(y=p[c=e+ne],a(c,i,y))}break;case q:for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)if(!((ne>0?ne:-ne)+(ce>0?ce:-ce)>=4)&&k[r+i>>1][e+c>>1][0]!==C)switch(y=p[c=e+ne],y[0]){case m:y[1]>0&&y[1]<4&&y[2]===A&&t[1]<=0&&(t[1]=t[2]);break;case q:y[1]<t[1]&&!y[3]&&t[3]&&(y[1]=t[1]);break;case M:1===t[3]&&a(c,i,y)}}break;case B:s=0;for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)switch(y=p[c=e+ne],y[0]){case m:if(3===y[1]&&y[2]===A)return void(t[1]=2);break;case M:2===t[2]&&a(c,i,y);break;case B:2===y[2]&&s++}}0!==t[2]||1!==s&&2!==s||(t[1]=2);break;case R:h=t[2];for(var ce=-ae;te>=ce;ce++){p=k[i=r+ce];for(var ne=-ee;re>=ne;ne++)y=p[c=e+ne],1&l[h]&&(s=y[0],(s===M||s===A||s===g)&&a(c,i,y)),y[0]===m&&3===y[1]&&y[2]!==M&&(l[h]|=2,b=2)}}}function f(e,a){return a[0]===e||a[0]===m&&a[2]===e}function o(e,a,r){if(k[a][e][1])return 0;var t,c,n,i,o,s,v,l,b,h,F,p,y=[e],w=[a],d=1;do{for(F=p=e=y[--d],a=w[d],b=k[a];(v=F-1)>=0&&b[v][0]===r&&!b[v][1];)F=v;for(;(l=p+1)<u&&b[l][0]===r&&!b[l][1];)p=l;for(h=F;p>=h;h++)b[h][0]=m,b[h][1]=4,b[h][2]=r;if(i=a-1,t=k[i],o=a+1,c=k[o],F===p&&f(r,t[e-1])&&f(r,t[e+1])&&f(r,t[e])&&f(r,(n=k[s=a-2])[e])&&!f(r,n[e-1])&&!f(r,n[e+1]))n[e][0]!==r||n[e][1]||(y[d]=e,w[d++]=s);else for(h=F;p>=h;h++)t[h][0]!==r||t[h][1]||(h===F||h===p||!f(r,c[h])||f(r,c[h+1])||f(r,c[h-1]))&&(y[d]=h,w[d++]=i);if(F===p&&f(r,c[e-1])&&f(r,c[e+1])&&f(r,c[e])&&f(r,(n=k[s=a+2])[e])&&!f(r,n[e-1])&&!f(r,n[e+1]))n[e][0]!==r||n[e][1]||(y[d]=e,w[d++]=s);else for(h=F;p>=h;h++)c[h][0]!==r||c[h][1]||(h===F||h===p||!f(r,t[h])||f(r,t[h+1])||f(r,t[h-1]))&&(y[d]=h,w[d++]=o)}while(d)}function s(){Q||(c(),Q=5),paused||requestAnimationFrame(s),Q--}for(var u=84,v=68,l=[0],b=0,k=[],h=v-1;h>=0;h--){k[h]=[];for(var F=u-1;F>=0;F--)k[h][F]=new Int32Array(6)}for(var h=0;100>h;h++)l[h]=0;var p=document.getElementById("PartLayer"),y=p.getContext("2d"),w=["#000000","#444466","#FFFFCC","#AAAAAA","#805050","#505080","#003000","#20CC20","#108010","#554040","#40403C","#858505","#FFC000","#FFFFFF","#DCAD2C","#FD9D18","#902090","#FFCC00","#40A060","#405050","#505040","#002080","#707070"],d=1,m=2,C=3,A=4,M=5,_=6,S=7,D=8,g=9,x=10,E=11,I=12,L=13,P=14,j=15,q=16,B=17,R=18,z=19,G=20,H=21,J=22,K=[0,1,0,0,1,1,0,1,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1],N=[0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,2,2,2,2],Q=0;t(),window.run_frame=c,window.simLoopFn=s,window.clickPixel=e}();
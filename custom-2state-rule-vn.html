<html>
  <head>
    <!-- <script src="jquery-3.1.0.min.js"></script> -->
    <style>
      .table {display: table; width: 100%;}
      .center {display: table-cell; vertical-align: middle; text-align: center;}
      .cbtn_1, .cbtn_2 {background-image:url('collapsible_1.png'); width: 106px; height: 24px;}
      .cbtn_1, .cmv_1 {background-position:0 0} .cbtn_2 {background-position:0 24px}
      .cbtn_1:active, .cbtn_2:active {background-image:url('collapsible_1_active.png');}
      .cmv_2 {background-position:0 -21px}
    </style>
	<meta charset="utf-8" />
    <script src="my_anim.js"></script>
	<script src="https://git123hub.github.io/static/von-neumann-parser.js"></script>
    <script>
    //<![CDATA[
      var childQR1 = "QR-14716036.svg";
      var switchQR = function() {
        var d = document.getElementById("QRCodeData"), t;
        t = childQR1; childQR1 = d.src; d.src = t;
      }
      var localCount = +(localStorage.localCount$3 || 0) + 1, alignFactor = 1, moving=false, altMoveState = 1;
      localStorage.localCount$3 = localCount;
      var collstat = true;
      var getcntp = function () {
        var topPosition = document.documentElement.scrollTop+document.body.scrollTop;
        var leftPosition = document.documentElement.scrollLeft+document.body.scrollLeft;
        var innerWidth2 = (mobileCheck ? window.innerWidth : document.documentElement.clientWidth) - 106;
        document.getElementById("counter").style.top = (topPosition + 24) + "px";
        document.getElementById("counter").style.left = (leftPosition + innerWidth2 * alignFactor) + "px";
        document.getElementById("coll_1").style.top = topPosition + "px";
        document.getElementById("coll_1").style.left = (leftPosition + innerWidth2 * alignFactor) + "px";
      }
      var expandPage = function () {
        if (top !== self && confirm("expand it?")) {
          top.location.href = self.location.href;
        }
      }
      var toggleColl = function () {
        collstat = !collstat
        if (collstat) {
          document.getElementById("counter").style.display = "";
          _openf(lastUpdate = +new Date());
          document.getElementById("coll_1").className = "cbtn_2";
        } else {
          _closef(lastUpdate = +new Date());
          document.getElementById("coll_1").className = "cbtn_1";
        }
      }
      
      var mobileCheck = (function(i){var e=/iPhone/i,n=/iPod/i,o=/iPad/i,t=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,r=/Android/i,d=/BlackBerry/i,s=/Opera Mini/i,a=/IEMobile/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,h=RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),c=function(i,e){return i.test(e)},l=function(i){var l=i||navigator.userAgent;this.apple={phone:c(e,l),ipod:c(n,l),tablet:c(o,l),device:c(e,l)||c(n,l)||c(o,l)},this.android={phone:c(t,l),tablet:!c(t,l)&&c(r,l),device:c(t,l)||c(r,l)},this.other={blackberry:c(d,l),opera:c(s,l),windows:c(a,l),firefox:c(b,l),device:c(d,l)||c(s,l)||c(a,l)||c(b,l)},this.seven_inch=c(h,l),this.any=this.apple.device||this.android.device||this.other.device||this.seven_inch},v=new l;v.Class=l;return v})().any;
      
    //]]>
    </script>
  </head>
<body style="background:#000" onscroll="getcntp();" onresize="this.onscroll();">
<div style="text-align:center;">
<canvas id="canvas" width="640" height="640" onclick="setPixel(event.offsetX, event.offsetY)"></canvas>
<br />
<input type="button" onclick="toggle()" value="start/stop" />
<input type="button" onclick="nextGen(); clearTimeInterval(); state = 0;" value="step" />
<input type="button" onclick="millseconds /= 1.1" value="faster" />
<input type="button" onclick="millseconds *= 1.1" value="slower" />
<input type="button" onclick="intervalStack.push(millseconds)" value="save speed property" />
<input type="button" onclick="PopInterval()" value="restore speed property" />
<br />
<button class="copy">Copy RLE</button>
<input type="button" onclick="pasteCode(document.getElementById('RLECode'))" value="parse RLE" />
<input type="button" onclick="randomFill(0.375)" value="37.5%" />
<a href="http://conwaylife.com/" target="_blank"><button>Link</button></a>
<a href="https://github.com/git123hub/repo-1/" target="_blank"><button>GitHub</button></a>
<input type="button" onclick="document.getElementById('coll_1').style.display='';" value="恢复已关闭的下拉列表" />
<br />
<input type="button" value="更换二维码" onclick="switchQR();" />
<a href="/"><button>返回到首页</button></a>
<br />
<span style="color:#FFF;">Rulestring: B<input type="text" value="2" id="irulestrB" style="width: 80px; color: inherit; background-color: inherit;" />/S<input type="text" value="013" id="irulestrS" style="width: 80px; color: inherit; background-color: inherit;" />V <input type="button" onclick="loadRule(document.getElementById('irulestrB').value,document.getElementById('irulestrS').value);" value="提交" /></span>
<br />
<textarea id="RLECode" style="background:#000; color:#999; width:500px" rows="12"></textarea>
</div>
<script type="text/javascript">
//<![CDATA[
var intervalStack = [];
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var dominantValue = function (a) {
  var max = 0, b, c = {};
  for (var i = 0, l = a.length; i < l; ++i) {
    if (a[i] !== 0) {
      (c[a[i]] === undefined) && (c[a[i]] = 0);
      ++c[a[i]];
      (c[a[i]] > max) && (max = c[a[i]], b = a[i]);
    }
  }
  return b;
}
var ruleTable = [5736, 27031];

var nextGenPart = function (c, n) {
  var s = !!n[0]*8 + !!n[1]*4 + !!n[2]*2 + !!n[3];
  return ((ruleTable[+!!c] >> s) & 1) * 255;
}
var array = [0,0];
for (var i = 0; i < 128; ++i) {
  array[i] = []
  for (var j = 0; j < 128; ++j) {
    array[i][j] = 0
  }
}
var palette = [];
var setPixel = function(x, y) {
  if (state !== 0) { return false; }
  var x1 = x - x % 5;
  var y1 = y - y % 5;
  var n = array[x1 / 5][y1 / 5];
  n = (n === 0 ? 255 : 0);
  n === 0 ? ctx.clearRect(x1, y1, 5, 5) : (ctx.fillStyle = palette[n], ctx.fillRect(x1, y1, 5, 5));
  array[x1 / 5][y1 / 5] = n;
}
var getNeighbor = function (a, x, y, w, h) {
  var list = [[x - 1, y], [x, y - 1], [x + 1, y], [x, y + 1]], n = [];
  for (var i = 0; i < 4; ++i) {
    var t = list[i];
    t[0] < 0 && (t[0] += w); 
    t[1] < 0 && (t[1] += h); 
    t[0] === w && (t[0] = 0); 
    t[1] === h && (t[1] = 0); 
    n[i] = a[t[0]][t[1]]
  }
  return n;
}
var nextGen = function (x, y) {
  ctx.clearRect(0, 0, 640, 640);
  var temp = [];
  for (var i = 0; i < 128; ++i) {
    temp[i] = []
    for (var j = 0; j < 128; ++j) {
      temp[i][j] = nextGenPart(array[i][j], getNeighbor(array, i, j, 128, 128));
      (temp[i][j] === 0) || (ctx.fillStyle = palette[temp[i][j]], ctx.fillRect(i * 5, j * 5, 5, 5));
    }
  }
  array = temp;
}
var colorGenerator = function(x) {
  var r = Math.round(36.43 * (x % 8));
  var g = Math.round(36.43 * (Math.floor(x/8) % 8));
  var b = Math.round(85 * (Math.floor(x/64) % 4));
  return (16777216 + r * 65536 + g * 256 + b).toString(16).slice(1);
}
for (var i = 0; i < 256; ++i) {
  palette[i] = "#" + colorGenerator(i);
}
var state = 0, id, millseconds = 1000;
var interval = function () {
  nextGen();
  id = setTimeout(interval, millseconds);
  return id;
}
var toggle = function () {
  state = (state + 1) % 2;
  switch (state) {
    case 0:
      clearTimeout(id);
    break;
    default:
      interval();
  }
}
var clearTimeInterval = function () {
  clearTimeout(id);
}
var PopInterval = function () {
  if (intervalStack.length) {
    millseconds = intervalStack.pop();
  } else {
    millseconds = 1000;
  }
}
var lifeLikeRule = "B2/S013V";

var loadRule = function (rstrb, rstrs) {
  lifeLikeRule = "B" + rstrb + "/S" + rstrs + "V";
  ruleTable = [parsePart_vN(rstrb), parsePart_vN(rstrs)];
}
//]]>
</script>
<script src="clipboard.min.js"></script>
<script src="patternRLE-lifelike.js"></script>
<script>
var clipboard = new Clipboard('.copy', {
   text: function() {
      return getPatternRLE();
   }
});
</script>
<div id="coll_1" class="cbtn_2" style="position:absolute; z-index: 2" onclick="toggleColl();" oncontextmenu="altMoveState=changeAlt();"></div>
<div id="counter" style="position:absolute; width: 106px; height: 205px; background-color: #ffd; z-index: 1">
  <div style="padding: 5px">
    <a href="http://www.easycounter.com/">
      <img src="//www.easycounter.com/counter.php?git123hub" border="0" ; alt="Hit Counter" class="cntr1" />
    </a>
  </div>
  <div style="padding: 5px">
    <a href="http://www.hitwebcounter.com" target="_blank">
      <img src="http://hitwebcounter.com/counter/counter.php?page=6467725&amp;style=0027&amp;nbdigits=6&amp;type=page&amp;initCount=0" title="webs counters" Alt="webs counters" border="0" class="cntr1" />
    </a>
  </div>
  <div style="position:absolute;top:58px">
    <div onclick="expandPage();">
      <img src="QR-1d.png" style="width:106px;height:106px" alt="二维码" id="QRCodeData" />
    </div>
    <div class="table">
      <div class="center" style="height:20px;font-size:16px"><span id="lcnt1" title="访问次数" onload="document.body.onscroll(); loadcnt();">$localCount</span></div>
    </div>
    <div onmousedown="movingO=true; mouseXpos = event.clientX;" onmouseup="movingO=false;" onmousemove="moveOpr(event)"
      onmouseleave="this.onmouseup();" class="cmv_1" style="background-image:url('move.png'); width: 106px; height: 21px;"
      oncontextmenu="movingZ(event); this.onmouseup(); return false;" onclick="altMoveC();" id="cmvB"></div>
  </div>
</div>
<script type="text/javascript">document.getElementById("lcnt1").innerHTML = localCount; getcntp();</script>
</body>
</html>

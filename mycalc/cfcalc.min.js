function $(e){return document.getElementById(e)}function cf2frac(e){for(var c,r,t=0,a=1,n=1,l=0,u=0,i=e.length;i>u;++u)c=n*+e[u]+t,r=l*+e[u]+a,t=n,a=l,n=c,l=r;return[n,l]}function frac2cf(e){for(var c,r=[],t=+e[0],a=+e[1];0!==a;)c=t%a,r.push((t-c)/a),t=a,a=c;return r}function frac2dec(e){return new BigNumber(e[0]).div(new BigNumber(e[1]))}function dec2frac(e){return new BigNumber(e).toFraction(1e15)}function btn1(){var e;if(!/(\d+[ ,;]*)+/.test(e=$("p1").value))return alert("不是有效的连分数");var c=cf2frac(e.trim().split(/\s*[,; ]\s*/));$("p2").value=c[0],$("p3").value=c[1]}function btn2(){var e=$("p2").value.replace(/[ ,']/g,""),c=$("p3").value.replace(/[ ,']/g,""),r=/\d+/;return r.test(e)&&r.test(c)?void($("p1").value=frac2cf([e,c]).join(", ").replace(",",";")):alert("不是有效的分数")}function btn3(){var e=$("p2").value.replace(/[ ,']/g,""),c=$("p3").value.replace(/[ ,']/g,""),r=/\d+/;return r.test(e)&&r.test(c)?void($("p4").value=frac2dec([e,c])):alert("不是有效的分数")}function perc2dec(e){e=e.replace(/^\s*|\s*%\s*$/g,"");var c=e.indexOf(".");return 0>c&&(c=e.length),e=2>c?"0.0"+(1>c?"0":e.charAt(0))+e.slice(c+1):(3>c?0:e.slice(0,c-2))+"."+e.substr(c-2,2)+e.slice(c+1),e.replace(/\.?0*$/,"").replace(/0*(\d(?:.|$))/,"$1")}function dec2perc(e){var c=e.split(".");for(c.length<2&&(c[1]=""),c[0]=c[0].replace(/^0*/,""),c[1]=c[1].replace(/0*$/,"");c[1].length<2;)c[1]+="0";var r=c[0],t=c[1].slice(0,2),a=r+(""===r?t.replace(/^0/,""):t),n=c[1].slice(2);return""===n||(n="."+n),a+n+"%"}function btn4(){var e=$("p4").value.trim(),c=/%/.test(e);try{c&&(e=perc2dec(e));var r=dec2frac(e)}catch(t){return alert("不是有效的小数/百分数")}$("p2").value=r[0],$("p3").value=r[1]}function btn5(){var e=$("p4").value.trim(),c=/%/.test(e);$("p4").value=c?perc2dec(e):dec2perc(e)}var acccalc=document.createElement("script");acccalc.src="bignumber.min.js",document.body.appendChild(acccalc),acccalc.onload=function(){BigNumber.set({DECIMAL_PLACES:30,EXPONENTIAL_AT:[-20,20]})};
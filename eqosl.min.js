var trace=!1,changePoints=function(){function a(a,b,c,d){var e,f,g,h,i=a-c,j=b-d;return e=j/i,f=b-a*e,g=i/j,h=a-b*g,[e,f,g,h]}function f(a,b,c,e){var f=2*Math.PI;d.globalAlpha=.3,d.fillStyle="#5000FF",d.beginPath(),d.arc(420.5+40*c,420.5-40*e,12,0,f),d.fill(),d.beginPath(),d.arc(420.5+40*c,420.5-40*e,5,0,f),d.fill(),d.beginPath(),d.arc(420.5+40*a,420.5-40*b,12,0,f),d.fill(),d.beginPath(),d.arc(420.5+40*a,420.5-40*b,5,0,f),d.fill(),d.globalAlpha=1,d.fillStyle="#000000",d.font="13px sans-serif",d.fillText("("+a+","+b+")",433+40*a,420.5-40*b),d.fillText("("+c+","+e+")",433+40*c,420.5-40*e)}function g(b,c,e,f){var h,g=document.getElementById("linear_equation_1");if(b===e&&c===f)return g.innerHTML="\u9700\u8981\u4e24\u4e2a\u4e0d\u540c\u7684\u70b9";if(d.globalAlpha=1,d.strokeStyle="#5000FF",d.lineWidth=2,d.beginPath(),b===e)d.moveTo(420.5+40*b,0),d.lineTo(420.5+40*b,841),g.innerHTML="x = "+b;else if(c===f)d.moveTo(0,420.5-40*c),d.lineTo(841,420.5-40*c),g.innerHTML="y = "+c;else{var j=a(b,c,e,f),k=-10.5,l=j[0]*k+j[1],m=10.5,n=j[0]*m+j[1];h="x",j[0]>0?(-10.5>l&&(l=-10.5,k=j[2]*l+j[3]),n>10.5&&(n=10.5,m=j[2]*n+j[3]),1!==j[0]&&(h=j[0]+h)):(l>10.5&&(l=10.5,k=j[2]*l+j[3]),-10.5>n&&(n=-10.5,m=j[2]*n+j[3]),h=-1===j[0]?"-"+h:j[0]+h),d.moveTo(420.5+40*k,420.5-40*l),d.lineTo(420.5+40*m,420.5-40*n),h+=0===j[1]?"":j[1]>0?" + "+j[1]:" - "+-j[1],g.innerHTML="y = "+h}d.stroke()}function k(a,b){var c=i.x,e=i.y;+j&&(h["x"+j]+=a-c,h["y"+j]+=b-e,d.clearRect(0,0,841,841),g(h.x1/40,h.y1/40,h.x2/40,h.y2/40),f(h.x1/40,h.y1/40,h.x2/40,h.y2/40)),i.x=a,i.y=b}var b=document.getElementsByClassName("canvas1"),c=b[0].getContext("2d"),d=b[1].getContext("2d");c.strokeStyle="#0000FF";for(var e=-52;52>=e;++e)0!==e&&(c.globalAlpha=e%5?.1:.3,c.beginPath(),c.moveTo(0,420.5+8*e),c.lineTo(841,420.5+8*e),c.moveTo(420.5+8*e,0),c.lineTo(420.5+8*e,841),c.stroke());c.globalAlpha=1,c.lineWidth=2,c.strokeStyle="#0000FF",c.beginPath(),c.moveTo(0,420.5),c.lineTo(841,420.5),c.stroke(),c.strokeStyle="#FF0000",c.beginPath(),c.moveTo(420.5,0),c.lineTo(420.5,841),c.stroke(),d.textBaseline="middle",c.fillStyle="#0000FF",c.font="16px sans-serif",c.textAlign="center",c.textBaseline="top";for(var e=-10;10>=e;++e)c.fillText(e,420.5-40*e,425);c.fillStyle="#FF0000",c.textAlign="right",c.textBaseline="middle";for(var e=-10;10>=e;++e)c.fillText(e,414,420.5-40*e);var h={x1:40,y1:40,x2:80,y2:120},i={x:void 0,y:void 0},j=0;return d.clearRect(0,0,841,841),g(h.x1/40,h.y1/40,h.x2/40,h.y2/40),f(h.x1/40,h.y1/40,h.x2/40,h.y2/40),k.begin=function(a,b){i.x=a,i.y=b;var c=144,d=(h.x1-a)*(h.x1-a)+(h.y1-b)*(h.y1-b),e=(h.x2-a)*(h.x2-a)+(h.y2-b)*(h.y2-b);j=c>=d?1:c>=e?2:0},k.set=function(a){h[a]=40*prompt("\u8bf7\u8f93\u5165\u6570\u503c:"),d.clearRect(0,0,841,841),g(h.x1/40,h.y1/40,h.x2/40,h.y2/40),f(h.x1/40,h.y1/40,h.x2/40,h.y2/40)},k}();
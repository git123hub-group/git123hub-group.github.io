function getOffsetSum(e){for(var t=0,l=0;e;)t+=parseInt(e.offsetTop),l+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:l}}var trace=!1,changePoints=function(){function e(e,t,l,n){var i,o,r,a,f=e-l,x=t-n;return i=x/f,o=t-e*i,r=f/x,a=e-t*r,[i,o,r,a]}function t(e,t,l,n){var i=2*Math.PI;r.globalAlpha=.3,r.fillStyle="#5000FF",r.beginPath(),r.arc(420.5+40*l,420.5-40*n,12,0,i),r.fill(),r.beginPath(),r.arc(420.5+40*l,420.5-40*n,5,0,i),r.fill(),r.beginPath(),r.arc(420.5+40*e,420.5-40*t,12,0,i),r.fill(),r.beginPath(),r.arc(420.5+40*e,420.5-40*t,5,0,i),r.fill(),r.globalAlpha=1,r.fillStyle="#000000",r.font="13px sans-serif",8>e?(r.textAlign="left",r.fillText("("+e+","+t+")",433+40*e,420.5-40*t)):(r.textAlign="right",r.fillText("("+e+","+t+")",408+40*e,420.5-40*t)),8>l?(r.textAlign="left",r.fillText("("+l+","+n+")",433+40*l,420.5-40*n)):(r.textAlign="right",r.fillText("("+l+","+n+")",408+40*l,420.5-40*n))}function l(t,l,n,i){var o,a=document.getElementById("linear_equation_1");if(t===n&&l===i)return a.innerHTML="需要两个不同的点";if(r.globalAlpha=1,r.strokeStyle="#5000FF",r.lineWidth=2,r.beginPath(),t===n)r.moveTo(420.5+40*t,0),r.lineTo(420.5+40*t,841),a.innerHTML="x = "+t;else if(l===i)r.moveTo(0,420.5-40*l),r.lineTo(841,420.5-40*l),a.innerHTML="y = "+l;else{var f=e(t,l,n,i),x=-10.5,y=f[0]*x+f[1],s=10.5,g=f[0]*s+f[1];o="x",f[0]>0?(-10.5>y&&(y=-10.5,x=f[2]*y+f[3]),g>10.5&&(g=10.5,s=f[2]*g+f[3]),1!==f[0]&&(o=f[0]+o)):(y>10.5&&(y=10.5,x=f[2]*y+f[3]),-10.5>g&&(g=-10.5,s=f[2]*g+f[3]),o=-1===f[0]?"-"+o:f[0]+o),r.moveTo(420.5+40*x,420.5-40*y),r.lineTo(420.5+40*s,420.5-40*g),o+=0===f[1]?"":f[1]>0?" + "+f[1]:" - "+-f[1],a.innerHTML="y = "+o}r.stroke()}function n(e,n){var i=x.x,o=x.y;+y&&(f["x"+y]+=e-i,f["y"+y]+=n-o,r.clearRect(0,0,841,841),l(f.x1/40,f.y1/40,f.x2/40,f.y2/40),t(f.x1/40,f.y1/40,f.x2/40,f.y2/40)),x.x=e,x.y=n}var i=document.getElementsByClassName("canvas1"),o=i[0].getContext("2d"),r=i[1].getContext("2d");o.strokeStyle="#0000FF";for(var a=-52;52>=a;++a)0!==a&&(o.globalAlpha=a%5?.1:.3,o.beginPath(),o.moveTo(0,420.5+8*a),o.lineTo(841,420.5+8*a),o.moveTo(420.5+8*a,0),o.lineTo(420.5+8*a,841),o.stroke());o.globalAlpha=1,o.lineWidth=2,o.strokeStyle="#0000FF",o.beginPath(),o.moveTo(0,420.5),o.lineTo(841,420.5),o.stroke(),o.strokeStyle="#FF0000",o.beginPath(),o.moveTo(420.5,0),o.lineTo(420.5,841),o.stroke(),r.textBaseline="middle",o.fillStyle="#0000FF",o.font="16px sans-serif",o.textAlign="center",o.textBaseline="top";for(var a=-10;10>=a;++a)o.fillText(a,420.5-40*a,425);o.fillStyle="#FF0000",o.textAlign="right",o.textBaseline="middle";for(var a=-10;10>=a;++a)o.fillText(a,414,420.5-40*a);var f={x1:40,y1:40,x2:80,y2:120},x={x:void 0,y:void 0},y=0;return r.clearRect(0,0,841,841),l(f.x1/40,f.y1/40,f.x2/40,f.y2/40),t(f.x1/40,f.y1/40,f.x2/40,f.y2/40),n.begin=function(e,t){x.x=e,x.y=t;var l=144,n=(f.x1-e)*(f.x1-e)+(f.y1-t)*(f.y1-t),i=(f.x2-e)*(f.x2-e)+(f.y2-t)*(f.y2-t);y=l>=n?1:l>=i?2:0},n.set=function(e){var n=prompt("请输入数值:");n&&(f[e]=40*n),r.clearRect(0,0,841,841),l(f.x1/40,f.y1/40,f.x2/40,f.y2/40),t(f.x1/40,f.y1/40,f.x2/40,f.y2/40)},n}();